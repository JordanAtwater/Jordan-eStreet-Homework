# Your Location

## Set up
This website was created with [Jekyll](https://jekyllrb.com/docs/). I already have Jekyll site ready, you just need to run it locally.After you fork this repo, do the following to get set up:

1. Install a [Ruby environment](https://jekyllrb.com/docs/installation/) per Jekyll's documentation. 
2. Run `gem install jekyll bundler` in your terminal to install Jekyll
3. Run `bundle` in your to terminal to install all dependencies. 
4. Run `bundle exec jekyll serve --livereload`. See the documentation for [command line usage](https://jekyllrb.com/docs/usage/) if you have any questions. 
5. Check http://localhost:4000 to see if you're in business. 

## How Jekyll Works
Now that you have Jekyll running locally, you'll notice a new directory has appeared: `_site`. This directory is the complete site output that gets generated by Jekyll. You'll notice there's all of the pages, CSS, and JS compiled and ready for the world. This is what you need to host. You'll notice The homepage (`index.html`) is served from the root, but the privacy policy is served from the `privacy-policy` directory. I used [Jekyll's Collections feature](https://jekyllrb.com/docs/collections/) to keep my content organized and adding a custom [permalink](https://jekyllrb.com/docs/permalinks/) means it will be served from a named directory with an `index.html` file. So the path is `/privacy-policy/index.html` but we want the user to access it via `/privacy-policy/`.

Jekyll has [additional documentation](https://jekyllrb.com/docs/deployment/) on deployments if you need further guidance. 

Website URLS:
http://jordansestreethw.com.s3-website-us-east-1.amazonaws.com/
http://staging.jordansestreethw.com.s3-website-us-east-1.amazonaws.com/

##Notes to developer: Firefox does have an issue running the js app but IE/Edge/Chrome can run it just fine
##Skip to Deployment Steps if you dont want to the prereqs

##To avoid issues with windows the following steps were run to keep all information on AWS

How To Additional steps:

*Ran steps off of a windows machine using a free tier AWS Linux 2 ec2 instance so didnt have native gui to check website status*
1) install MATE: sudo amazon-linux-extras install mate-desktop1.x
2) Define mate to all users: sudo bash -c 'echo PREFERRED=/usr/bin/mate-session > /etc/sysconfig/desktop'
2 Optional) To define MATE for the current user only: echo "/usr/bin/mate-session" > ~/.Xclients && chmod +x ~/.Xclients
3) Install TigerVNC: sudo yum install tigervnc-server
4) Congfigure VNC password atleast 6 characters: vncpasswd
5) Start VNC server: vncserver :1
6) Create new systemd unit: sudo cp /lib/systemd/system/vncserver@.service /etc/systemd/system/vncserver@.service
7) Replace all occurences of <USER> in new unit with ec2-user: sudo sed -i 's/<USER>/ec2-user/' /etc/systemd/system/vncserver@.service
8) Reload systemd: sudo systemctl daemon-reload
9) Enable the service: sudo systemctl enable vncserver@:1
10) Start the service: sudo systemctl start vncserver@:1

For windows:
1) Open PuTTYgen and generate a putty key of your access key for the server
2) Enter all the server information to connect but before connecting go to Connection menu -> ssh -> tunnels
3) Enter 5901 in Source Port, localhost:5901 in Destination, then select Add
4) Open VNC for localhost:1 and you can now check http://localhost:4000

For Mac/Linux CLI only instances:
ssh -L 5901:localhost:5901 -i PEM_FILE ec2-user@INSTANCE_IP


## Steps to Deploy to website

Deployment Steps:

*Confirm git branch w/ git status, if not in staging use git checkout staging*
1) After going through the local install documentation cd to the _site directory
2) Run 's3_website cfg create' to generate the s3_website.yml file
3) vi s3_website.yml and enter AWS creds and S3 bucket name (place staging.sitename.com here)
4) s3_website cfg apply (the bucket will generate if it didnt already exist)
5) s3_website push (use this for every update/change to the site)
6) Check the status of the website at the presented url after you have used the s3 push command (format staging.bucketname.awsregion.com)
7) Once confirmed operational use git add/commit/push commands then  checkout to switch to the master branch and repeat those steps without the staging prefix on site.
8) Once both are confirmed operational create an AMI of the server to have a working backup for future updates failsafe


## Included steps if free tier limitations did not exist/best practices
-Use AWS Certificate Manager to generate a secure SSL Cert for websites
-Purchasing the domain name (if not already done) and using Amazon Route 53 to route all traffic to the s3 bucket containing our website
-Elastic Beanstalk/Cloud watch for continuous integration and monitoring/alerts
-Separation of staging/dev environments in separate ec2 instances

